<!DOCTYPE html>
<html>
    <head>
    <meta name="viewport" content="width=device-width,initial-scale=1">
        <title>Declarative Data Binding with bindy.js</title>
        <style>
          *{
            font-family: 'helvetica neue', sans-serif;
            font-weight: 200;
          }
        </style>
    </head>
    <body>
      <div id="budget1">
        <h1>Bindy.js!</h1>

          <h2>My Budget</h2>
          <input type="text" placeholder="rent" data-bind-to="budget.rent" />
          <input type="text" placeholder="food" data-bind-to="budget.food" />
          <input type="text" placeholder="car" data-bind-to="budget.car" />
          <input type="text" placeholder="gym" data-bind-to="budget.gym" />
          <input type="text" placeholder="transportation" data-bind-to="budget.transportation" />


        <div class="results">
          <h2>My Budget:</h2>
          <p data-bind-from="budget.rent"></p>
          <p data-bind-from="budget.food"></p>
          <p data-bind-from="budget.car"></p>
          <p data-bind-from="budget.gym"></p>
          <p data-bind-from="budget.transportation"></p>
          <p>total: <span data-bind-from="budget.total"><span></p>
        </div>
      </div>

      <div id="budget2">
        <h1>Bindy.js!</h1>

          <h2>My Budget</h2>
          <input type="text" placeholder="rent" data-bind-to="budget.rent" />
          <input type="text" placeholder="food" data-bind-to="budget.food" />
          <input type="text" placeholder="car" data-bind-to="budget.car" />
          <input type="text" placeholder="gym" data-bind-to="budget.gym" />
          <input type="text" placeholder="transportation" data-bind-to="budget.transportation" />


        <div class="results">
          <h2>My Budget 2:</h2>
          <p data-bind-from="budget.rent"></p>
          <p data-bind-from="budget.food"></p>
          <p data-bind-from="budget.car"></p>
          <p data-bind-from="budget.gym"></p>
          <p data-bind-from="budget.transportation"></p>
          <p>total: <span data-bind-from="budget.total"><span></p>
        </div>
      </div>

      <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
      <script src="jquery.bindy.js"></script>
      <script>
        // Basic bindy Tests
        $('#budget1').bindy({
          beforeUpdate: function(rootModel){
            var b = rootModel.budget;
            // total up your rent
            rootModel.budget.total = 0;
            rootModel.budget.total += parseInt(b.rent, 10) || 0;
            rootModel.budget.total += parseInt(b.food, 10) || 0;
            rootModel.budget.total += parseInt(b.car, 10) || 0;
            rootModel.budget.total += parseInt(b.gym, 10) || 0;
            rootModel.budget.total += parseInt(b.transportation, 10) || 0;
            // must return the root object passed in to apply a transformation on your model
            return rootModel;
          }
        });

         $('#budget2').bindy({});
      </script>
      </body>
  </html>
